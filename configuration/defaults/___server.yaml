defaults:
  server:
    host: 0.0.0.0
    port: 8080
    root: /app
    index: index.html
    config:
      inject: before_script # head/before_script
    compression:
      enabled: true # based on accept-encoding header.
      algorithms:
        - level: 11
          method: br
        - level: 7
          method: gzip
        - level: 7
          method: deflate
      extensions:
        - js
        - xml
        - map
        - json
        - svg
        - mjs
        - html
        - htm
        - md
        - css
        - txt
        - csv
        - woff
        - woff2
    swoole:
      log_level: 0 # warning level, 0 debug
      buffer_output_size: 33554432 # 32 * 1024 * 1024
    log_info: "%%cSTAGE=%s SHA1=%s; %%cSecurity bugs: security@teamc.io, Job/partnership: work@teamc.io"
    headers:
      csp:
        - default-src 'self'
        - script-src 'self' 'unsafe-inline' cdnjs.cloudflare.com
        - "img-src 'self' data:"
        - style-src 'self' 'unsafe-inline' fonts.googleapis.com cdnjs.cloudflare.com
        - "font-src 'self' data: fonts.gstatic.com cdnjs.cloudflare.com"
        - form-action 'self'
      feature_policy:
        - geolocation 'none'
        - payment 'none'
        - microphone 'none'
        - camera 'none'
        - autoplay 'none'
      referer_policy: no-referrer
      pragma: public
      cache_control: public, must-revalidate, proxy-revalidate, max-age=31536000
      frame_options: sameorigin
      xss_protection: 1; mode=block
      x_content_type: nosniff
      x_content_type_options: nosniff
      x_ua_compatible: IE=edge
      sts: max-age=31536000; includeSubDomains; preload

    # https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types
    mimes:
      map: application/json
      xml: application/xml
      json: application/json
      txt: text/plain
      html: text/html
      htm: text/html
      md: text/plain
      css: text/css
      js: text/javascript
      mjs: text/javascript
      png: image/png
      gif: image/gif
      jpg: image/jpg
      jpeg: image/jpg
      svg: image/svg+xml
      webp: image/webp
      bmp: image/bmp
      ico: image/x-icon
      tif: image/tiff
      tiff: image/tiff
      ts: application/typescript
      otf: application/x-font-opentype
      ttf: font/ttf
      woff: font/woff
      woff2: font/woff2
      eot: application/vnd.ms-fontobject
      sfnt: application/font-sfnt
      csv: text/csv
